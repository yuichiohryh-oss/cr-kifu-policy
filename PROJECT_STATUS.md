# PROJECT_STATUS.md

## プロジェクト概要

本プロジェクトは、**Clash Royale（クラロワ）の録画動画から盤面状態と行動イベントを抽出し、棋譜（イベント列）として構造化し、学習・推論を通じて次の行動を提案するAIシステム**を構築することを目的とする。

内部開発ではゲーム固有名詞・UI仕様・数値仕様をそのまま扱い、外部公開時のみ一般化表現へ変換する。

---

## 現在の到達点（2026-01）

* scrcpy 録画動画からフレーム取得が可能
* クリック時刻・座標などの操作ログを取得可能
* 盤面ROI抽出・グリッド化の基盤実装あり
* 行動提案モデル（画像 + 補助特徴 → action）が一通り動作

---

## 現在の最優先テーマ

### 🎯 棋譜（イベント列）中心のパイプライン確立

**動画 → 棋譜（kifu.jsonl） → dataset → 学習 → 提案** を正式ルートとする。

---

## 棋譜（kifu.jsonl）の位置づけ

* 人間が読める・修正できる中間成果物
* 学習ラベルの一次情報源
* 将来の特徴追加・再学習に耐える設計資産

### 最小イベント種別（確定）

* `action` : 自分の操作（手札スロット選択 + 盤面位置）
* `spawn`  : ユニット／スペル等の盤面出現（自軍・敵軍）
* `resource` : 自分のエリクサー量

---

## 今後の段階計画

### Phase 1（最優先）

* 操作ログ + 動画から `action` イベントを高精度で棋譜化
* 棋譜ベースの模倣学習で提案モデルを安定稼働させる

### Phase 2

* 差分検出・追跡による `spawn` イベント追加
* 盤面圧・侵入量などの派生特徴を導入

### Phase 3

* エリクサー量・次カードUIの棋譜化
* 出せない手を出さない提案制御

---

## 設計原則

* 棋譜は **追記可能・後処理可能** であること
* 完全認識を目指さず、粗い情報から段階的に精度を上げる
* 学習・推論・デバッグで同一イベント表現を使う
